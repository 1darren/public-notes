Contents:
1. Order of Operations
  - CTE (WITH ... AS)  
  - Windowing (AGGREGATE ... OVER)
2. MS SQL vs DB2 SQL 


----

## Order of Operations 

```
SELECT
  column_name ,
  AGGREGATE(column_name)
FROM
  Table_Name
WHERE
  boolean_conditional
GROUP BY
  pivot_columns
HAVING
  secondary_conditional
ORDER BY
  sorting_column ASC, secondary_sorting DESC
LIMIT
  top_rows_to_select
  
  
```
### CTE Common Table Expressions
- to create a subtable with an alias you can SELECT from

```
WITH CTE_Table_1 AS 
  (
  SELECT 
    cte_column
   FROM
    cte_table
   WHERE
    cte_conditional
  ) ,
WITH CTE_Table_2 AS 
  (
  ...
  )

SELECT
  column
FROM 
  CTE_Table_1
JOIN 
  CTE_Table_2
ON
  CTE_Table_1.column = CTE_Table_2.column
```

### Windowing 
- Window Functions create a column with fresh values calculated values, based on the rows

```
SELECT 
  col_1,
  col_2, 
  col_3,
  AGGREGATE(col_1) OVER (ORDER BY col_2, col_3) AS running_total
FROM 
  table
  
```

e.g. `SUM(duration_seconds) OVER (ORDER BY start_time) AS running_total`
- `OVER` creates the windowing function
- creates a `running_total` of `SUM of duration_seconds`
- `START_TIME` is ordered (`ASC` by default)
- each stepwise increment of `START_TIME`increases the rows selected for the computation of `SUM of duration_seconds`
  - so if there are 3 rows for `START_TIME`, they would all be collected

----

## MS SQL vs DB2 SQL
